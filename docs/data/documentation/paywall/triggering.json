{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Triggers enable you to retroactively decide where and when to show a paywall in your app."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A trigger is an analytics event you can wire up to specific rules in a Campaign on the "},{"type":"reference","isActive":true,"identifier":"https:\/\/superwall.com\/dashboard"},{"type":"text","text":". The Paywall SDK listens for these analytics events and evaluates their rules to determine whether or not to show a paywall when the trigger is fired."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Paywalls are "},{"type":"strong","inlineContent":[{"type":"text","text":"sticky"}]},{"type":"text","text":", in that when a user is assigned a paywall within a rule, they will continue to see that paywall unless you remove the paywall from the rule."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can attach a trigger to your own analytical events that you send or you can attach a trigger to some of the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/AutomaticallyTrackedEvents"},{"type":"text","text":". Specifically: "},{"type":"codeVoice","code":"app_install"},{"type":"text","text":", "},{"type":"codeVoice","code":"app_launch"},{"type":"text","text":", and "},{"type":"codeVoice","code":"session_start"},{"type":"text","text":"."}]},{"anchor":"Triggering-a-Paywall","level":2,"type":"heading","text":"Triggering a Paywall"},{"type":"paragraph","inlineContent":[{"type":"text","text":"First, "},{"type":"reference","isActive":true,"identifier":"https:\/\/docs.superwall.com\/docs\/campaigns"},{"type":"text","text":" on the Superwall dashboard."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once you’ve done that, you need to send a trigger event from your app."},{"type":"text","text":" "},{"type":"text","text":"There are two ways to do this via the SDK: "},{"type":"strong","inlineContent":[{"type":"text","text":"explicitly"}]},{"type":"text","text":" and "},{"type":"strong","inlineContent":[{"type":"text","text":"implicitly"}]},{"type":"text","text":":"}]},{"anchor":"Explicit-Triggers-in-UIKit","level":3,"type":"heading","text":"Explicit Triggers in UIKit"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’re using UIKit and you need completion handlers for a trigger, you need to use an explicit trigger by calling "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/Paywall\/trigger(event:params:on:ignoreSubscriptionStatus:onSkip:onPresent:onDismiss:)"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["Paywall.trigger(","  event: \"workout_complete\", ","  params: [\"total_workouts\": 17], ","  onSkip: { error in }, ","  onPresent: { paywallInfo in }, ","  onDismiss: { didPurchase, productId, paywallInfo in }",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this example, you’re sending the event "},{"type":"codeVoice","code":"workout_complete"},{"type":"text","text":" to the dashboard along with some parameters. You can refer to these parameters in the rules you define in your campaign. You can then utilize the completion handlers associated with the paywall presentation state."}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"onSkip"},{"type":"text","text":" is a completion block that gets called when the paywall’s presentation is skipped. This accepts an "},{"type":"codeVoice","code":"NSError?"},{"type":"text","text":" with more details. It is recommended to check the error code to handle the onSkip callback. If the error code is "},{"type":"codeVoice","code":"4000"},{"type":"text","text":", it means the user didn’t match any rules. If the error code is "},{"type":"codeVoice","code":"4001"},{"type":"text","text":" it means the user is in a holdout group. Otherwise, a "},{"type":"codeVoice","code":"404"},{"type":"text","text":" error code means an error occurred."}]}]},{"anchor":"Explicit-Triggers-in-SwiftUI","level":3,"type":"heading","text":"Explicit Triggers in SwiftUI"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’re using SwiftUI and need completion handlers for a trigger, you need to use an explicit trigger by attaching the view modifier "},{"type":"codeVoice","code":".triggerPaywall(forEvent:withParams:shouldPresent:onPresent:onDismiss:onFail:)"},{"type":"text","text":" to a view."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The example below triggers a paywall when the user toggles the "},{"type":"codeVoice","code":"showPaywall"},{"type":"text","text":" variable by tapping on the "},{"type":"strong","inlineContent":[{"type":"text","text":"Complete Workout"}]},{"type":"text","text":" button. The paywall will only show if the trigger for the "},{"type":"codeVoice","code":"workout_complete"},{"type":"text","text":" event is active in the "},{"overridingTitleInlineContent":[{"type":"text","text":"Superwall Dashboard"}],"isActive":true,"type":"reference","identifier":"https:\/\/superwall.com\/dashboard","overridingTitle":"Superwall Dashboard"},{"type":"text","text":" and the user doesn’t have an active subscription:"}]},{"type":"codeListing","syntax":"swift","code":["struct ContentView: View {","  @State private var showPaywall = false","","  var body: some View {","    Button(","      action: {","        showPaywall.toggle()","      },","      label: {","        Text(\"Complete Workout\")","      }","    )","    .triggerPaywall(","      forEvent: \"workout_complete\",","      withParams: [\"total_workouts\": 17],","      shouldPresent: $showPaywall,","      onPresent: { paywallInfo in","        print(\"paywall info is\", paywallInfo)","      },","      onDismiss: { result in","        switch result.state {","        case .closed:","          print(\"User dismissed the paywall.\")","        case .purchased(productId: let productId):","          print(\"Purchased a product with id \\(productId), then dismissed.\")","        case .restored:","          print(\"Restored purchases, then dismissed.\")","        }","      },","      onFail: { error in","        print(\"did fail\", error)","      }","    )","  }","}"]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"onFail"},{"type":"text","text":" is a completion block that gets called when the paywall’s presentation fails. This accepts an "},{"type":"codeVoice","code":"NSError?"},{"type":"text","text":" with more details. It is recommended to check the error code to handle the onFail callback. If the error code is "},{"type":"codeVoice","code":"4000"},{"type":"text","text":", it means the user didn’t match any rules. If the error code is "},{"type":"codeVoice","code":"4001"},{"type":"text","text":" it means the user is in a holdout group. Otherwise, a "},{"type":"codeVoice","code":"404"},{"type":"text","text":" error code means an error occurred."}]}]},{"anchor":"Implicit-Triggers","level":3,"type":"heading","text":"Implicit Triggers"},{"type":"codeListing","syntax":"swift","code":["Paywall.track(","  \"workout_complete\", ","  [\"total_workouts\": 17]",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To provide your team with ultimate flexibility, we recommend sending all your analytical events to Superwall via "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/Paywall\/track(_:_:)-2vkwo"},{"type":"text","text":". That way you can retroactively add a paywall to any of your analytical events, should you decide to do so."}]},{"anchor":"Integrating-with-Existing-Analytics","level":2,"type":"heading","text":"Integrating with Existing Analytics"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’re already set up with an analytics provider, you’ll typically have an "},{"type":"codeVoice","code":"Analytics.swift"},{"type":"text","text":" singleton (or similar) to disperse all your events from. Here’s how that file might look:"}]},{"type":"codeListing","syntax":"swift","code":["import Paywall","import Mixpanel","import Firebase","","final class Analytics {","  static let shared = Analytics()","  ","  func track(","    event: String,","    properties: [String: Any]","  ) {","    \/\/ Superwall","    Paywall.track(event, properties)","    ","    \/\/ Firebase (just an example)","    Firebase.Analytics.logEvent(event, parameters: properties)","    ","    \/\/ Mixpanel (just an example)","    Mixpanel.mainInstance().track(event: eventName, properties: properties)","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Therefore you can track all your analytics in one go:"}]},{"type":"codeListing","syntax":"swift","code":["Analytics.shared.track(","  \"workout_complete\",","  [\"total_workouts\": 17]",")"]}]}],"schemaVersion":{"major":0,"minor":1,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/paywall\/triggering"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Paywall\/documentation\/Paywall\/Triggering","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Show a paywall in your app in response to an analytical event."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Triggering a Paywall","role":"article","modules":[{"name":"Paywall"}]},"hierarchy":{"paths":[["doc:\/\/Paywall\/documentation\/Paywall"],["doc:\/\/Paywall\/documentation\/Paywall","doc:\/\/Paywall\/documentation\/Paywall\/Paywall"]]},"seeAlsoSections":[{"title":"Essentials","identifiers":["doc:\/\/Paywall\/documentation\/Paywall\/Ecosystem","doc:\/\/Paywall\/documentation\/Paywall\/GettingStarted","doc:\/\/Paywall\/documentation\/Paywall\/Paywall"],"generated":true}],"references":{"https://superwall.com/dashboard":{"title":"Superwall Dashboard","titleInlineContent":[{"type":"text","text":"Superwall Dashboard"}],"type":"link","identifier":"https:\/\/superwall.com\/dashboard","url":"https:\/\/superwall.com\/dashboard"},"https://docs.superwall.com/docs/campaigns":{"title":"create a campaign and add a trigger","titleInlineContent":[{"type":"text","text":"create a campaign and add a trigger"}],"type":"link","identifier":"https:\/\/docs.superwall.com\/docs\/campaigns","url":"https:\/\/docs.superwall.com\/docs\/campaigns"},"doc://Paywall/documentation/Paywall/Paywall/track(_:_:)-2vkwo":{"role":"symbol","title":"track(_:_:)","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"track"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", ["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":" : "},{"kind":"keyword","text":"Any"},{"kind":"text","text":"])"}],"abstract":[{"type":"text","text":"Tracks a custom analytical event with optional parameters."}],"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/Paywall\/track(_:_:)-2vkwo","kind":"symbol","type":"topic","url":"\/documentation\/paywall\/paywall\/track(_:_:)-2vkwo"},"doc://Paywall/documentation/Paywall/GettingStarted":{"role":"collectionGroup","title":"Getting Started with Paywall","abstract":[{"type":"text","text":"Configuring the SDK and its delegate."}],"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/GettingStarted","kind":"article","type":"topic","url":"\/documentation\/paywall\/gettingstarted"},"doc://Paywall/documentation/Paywall/Paywall":{"role":"symbol","title":"Paywall","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Paywall"}],"abstract":[{"type":"text","text":"The primary class for integrating Superwall into your application. It provides access to all its featured via static functions and variables."}],"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/Paywall","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Paywall"}],"url":"\/documentation\/paywall\/paywall"},"doc://Paywall/documentation/Paywall/Ecosystem":{"role":"article","title":"Understanding How Superwall Works","abstract":[{"type":"text","text":"An overview of how Superwall works in relation to your app."}],"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/Ecosystem","kind":"article","type":"topic","url":"\/documentation\/paywall\/ecosystem"},"doc://Paywall/documentation/Paywall/Paywall/trigger(event:params:on:ignoreSubscriptionStatus:onSkip:onPresent:onDismiss:)":{"role":"symbol","title":"trigger(event:params:on:ignoreSubscriptionStatus:onSkip:onPresent:onDismiss:)","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"trigger"},{"kind":"text","text":"("},{"kind":"externalParam","text":"event"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"params"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":" : "},{"kind":"keyword","text":"Any"},{"kind":"text","text":"]?, "},{"kind":"externalParam","text":"on"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UIViewController","preciseIdentifier":"c:objc(cs)UIViewController"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"ignoreSubscriptionStatus"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"onSkip"},{"kind":"text","text":": (("},{"kind":"typeIdentifier","text":"NSError","preciseIdentifier":"c:objc(cs)NSError"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")?, "},{"kind":"externalParam","text":"onPresent"},{"kind":"text","text":": (("},{"kind":"typeIdentifier","text":"PaywallInfo","preciseIdentifier":"c:@M@Paywall@objc(cs)PaywallInfo"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")?, "},{"kind":"externalParam","text":"onDismiss"},{"kind":"text","text":": (("},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"typeIdentifier","text":"PaywallInfo","preciseIdentifier":"c:@M@Paywall@objc(cs)PaywallInfo"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")?)"}],"abstract":[{"type":"text","text":"Shows a paywall to the user when: An analytics event you provide is tied to an active trigger inside a campaign on the "},{"type":"reference","isActive":true,"identifier":"https:\/\/superwall.com\/dashboard"},{"type":"text","text":"; the user matches a rule in the campaign; and a binding to a Boolean value that you provide is true."}],"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/Paywall\/trigger(event:params:on:ignoreSubscriptionStatus:onSkip:onPresent:onDismiss:)","kind":"symbol","type":"topic","url":"\/documentation\/paywall\/paywall\/trigger(event:params:on:ignoresubscriptionstatus:onskip:onpresent:ondismiss:)"},"doc://Paywall/documentation/Paywall/AutomaticallyTrackedEvents":{"role":"article","title":"Automatically Tracked Events","abstract":[{"type":"text","text":"Events that are automatically tracked via the SDK and power the charts in the Superwall dashboard."}],"identifier":"doc:\/\/Paywall\/documentation\/Paywall\/AutomaticallyTrackedEvents","kind":"article","type":"topic","url":"\/documentation\/paywall\/automaticallytrackedevents"},"https://superwall.com":{"title":"Superwall","titleInlineContent":[{"type":"text","text":"Superwall"}],"type":"link","identifier":"https:\/\/superwall.com","url":"https:\/\/superwall.com"},"doc://Paywall/documentation/Paywall":{"role":"collection","title":"Paywall","abstract":[{"type":"text","text":"The client SDK for "},{"type":"reference","isActive":true,"identifier":"https:\/\/superwall.com"},{"type":"text","text":", a service that lets you remotely configure, present and iterate paywalls – helping you find winners quickly."}],"identifier":"doc:\/\/Paywall\/documentation\/Paywall","kind":"symbol","type":"topic","url":"\/documentation\/paywall"}}}